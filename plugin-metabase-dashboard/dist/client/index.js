!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-i18next"),require("@formily/shared"),require("@formily/core"),require("@nocobase/client"),require("antd"),require("@ant-design/icons"),require("@formily/react"),require("react")):"function"==typeof define&&define.amd?define("@dgtech/plugin-metabase-dashboard",["react-i18next","@formily/shared","@formily/core","@nocobase/client","antd","@ant-design/icons","@formily/react","react"],t):"object"==typeof exports?exports["@dgtech/plugin-metabase-dashboard"]=t(require("react-i18next"),require("@formily/shared"),require("@formily/core"),require("@nocobase/client"),require("antd"),require("@ant-design/icons"),require("@formily/react"),require("react")):e["@dgtech/plugin-metabase-dashboard"]=t(e["react-i18next"],e["@formily/shared"],e["@formily/core"],e["@nocobase/client"],e.antd,e["@ant-design/icons"],e["@formily/react"],e.react)}(self,function(e,t,r,n,o,a,i,l){return function(){"use strict";var c={753:function(e){var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==n.join(""))return!1;var o={};if("abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},o)).join(""))return!1;return!0}catch(e){return!1}}()?function(e,o){for(var a,i,l=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]),a)r.call(a,u)&&(l[u]=a[u]);if(t){i=t(a);for(var s=0;s<i.length;s++)n.call(a,i[s])&&(l[i[s]]=a[i[s]])}}return l}:Object.assign},482:function(e){e.exports=a},563:function(e){e.exports=r},505:function(e){e.exports=i},875:function(e){e.exports=t},772:function(e){e.exports=n},721:function(e){e.exports=o},156:function(e){e.exports=l},238:function(t){t.exports=e}},u={};function s(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return c[e](r,r.exports,s),r.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};s.r(p),s.d(p,{PluginBlockMetabaseDashboardClient:function(){return Z},default:function(){return ee}});var f=s("772"),d=JSON.parse('{"noConfig":"Please configure the Dashboard ID in the block settings first","Metabase Dashboard":"Metabase Dashboard","Metabase Dashboard Settings":"Metabase Dashboard Settings","Saved successfully":"Saved successfully","Edit Metabase Dashboard":"Edit Metabase Dashboard","Dashboard ID":"Dashboard ID","Base URL":"Base URL","Secret Key":"Secret Key","Submit":"Submit"}'),b=JSON.parse('{"noConfig":"请先在区块设置中配置 Dashboard ID","Metabase Dashboard":"Metabase 仪表盘","Metabase Dashboard Settings":"Metabase 仪表盘设置","Saved successfully":"保存成功","Edit Metabase Dashboard":"编辑 Metabase 仪表盘","Dashboard ID":"仪表盘 ID","Base URL":"基础 URL","Secret Key":"密钥","Submit":"提交"}'),y=s("156"),m=s.n(y),h=s("505"),v=s("721"),g=s("753"),O=s.n(g),w=({url:e,allowFullScreen:t,position:r,display:n,height:o,width:a,overflow:i,styles:l,onLoad:c,onMouseOver:u,onMouseOut:s,scrolling:p,id:f,frameBorder:d,ariaHidden:b,sandbox:y,allow:h,className:v,title:g,ariaLabel:w,ariaLabelledby:j,name:S,target:x,loading:P,importance:D,referrerpolicy:k,allowpaymentrequest:I,src:E,key:C})=>{let M=O()({src:E||e,target:x||null,style:{position:r||null,display:n||"initial",overflow:i||null},scrolling:p||null,allowpaymentrequest:I||null,importance:D||null,sandbox:y&&[...y].join(" ")||null,loading:P||null,styles:l||null,name:S||null,className:v||null,allowFullScreen:"allowFullScreen",referrerpolicy:k||null,title:g||null,allow:h||null,id:f||null,"aria-labelledby":j||null,"aria-hidden":b||null,"aria-label":w||null,width:a||null,height:o||null,onLoad:c||null,onMouseOver:u||null,onMouseOut:s||null,key:C||"iframe"}),B=Object.create(null);for(let e of Object.keys(M))null!=M[e]&&(B[e]=M[e]);for(let e of Object.keys(B.style))null==B.style[e]&&delete B.style[e];if(B.styles)for(let e of Object.keys(B.styles))B.styles.hasOwnProperty(e)&&(B.style[e]=B.styles[e]),Object.keys(B.styles).pop()==e&&delete B.styles;if(t){if("allow"in B){let e=B.allow.replace("fullscreen","");B.allow=`fullscreen ${e.trim()}`.trim()}else B.allow="fullscreen"}return d>=0&&!B.style.hasOwnProperty("border")&&(B.style.border=d),m().createElement("iframe",Object.assign({},B))},j=s("238"),S=function(){return(0,j.useTranslation)("metabase-dashboard").t};function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}var D=(0,h.observer)(function(e){var t,r,n=e.dashboardRecordId,o=e.height,a=(0,h.useField)();var i=(t=(0,y.useState)(null),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,l=!1;try{for(o=o.call(e);!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{!i&&null!=o.return&&o.return()}finally{if(l)throw n}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}}(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1],u=(0,f.useBlockHeight)()||o,s=S(),p=(0,f.useRequest)({url:"metabaseDashboard:getEmbedUrl/".concat(n)},{refreshDeps:[n,a.data],ready:!!n}),d=p.loading,b=p.data;return((0,y.useEffect)(function(){b&&c(b)},[b]),n)?d&&!l?m().createElement("div",{style:{marginBottom:"24px",height:P(u)?"".concat(u,"px"):u||"60vh",border:0}},m().createElement(v.Spin,null)):m().createElement(w,{url:l,width:"100%",display:"block",position:"relative",styles:{marginBottom:"24px",height:P(u)?"".concat(u,"px"):u||"60vh",border:0}}):m().createElement(v.Card,{style:{marginBottom:24,height:P(u)?"".concat(u,"px"):u}},s("noConfig"))},{displayName:"MetabaseDashboard"}),k=s("482"),I=function(){var e,t,r=(0,f.useSchemaInitializer)().insert,n=(0,f.useSchemaInitializerItem)();return m().createElement(f.SchemaInitializerItem,(e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({},n),t=(t={icon:m().createElement(k.PicRightOutlined,null),onClick:function(){r({type:"void","x-settings":"blockSettings:metabaseDashboard","x-decorator":"BlockItem","x-decorator-props":{name:"metabase-dashboard"},"x-component":"MetabaseDashboard","x-component-props":{}})}},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e))},E=function(e){return m().createElement(f.SchemaComponentOptions,{components:{MetabaseDashboard:D,MetabaseDashboardBlockInitializer:I}},e.children)},C=s("875");function M(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(n,o)}function B(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){M(a,n,o,i,l,"next",e)}function l(e){M(a,n,o,i,l,"throw",e)}i(void 0)})}}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}function R(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var F={items:[{name:"EditDashboard",type:"modal",useComponentProps:function(){var e,t,r=(0,h.useField)(),n=(0,h.useFieldSchema)(),o=(0,f.useAPIClient)(),a=(0,f.useDesignable)().dn;var i=(e=B(function(e){var t,i,l,c,u,s,p;return R(this,function(f){switch(f.label){case 0:if(i=e.dashboardId,!(l=null===(t=n["x-component-props"])||void 0===t?void 0:t.dashboardRecordId))return[3,2];return[4,o.resource("metabaseDashboard").update({filterByTk:l,values:{dashboardId:i}})];case 1:return c=(null==(s=f.sent().data)?void 0:null===(u=s.data)||void 0===u?void 0:u[0])||{id:l},[3,4];case 2:return[4,o.resource("metabaseDashboard").create({values:{dashboardId:i}})];case 3:c=null==(p=f.sent().data)?void 0:p.data,f.label=4;case 4:var d,b;return n["x-component-props"]=(d=q({},n["x-component-props"]),b=(b={dashboardRecordId:c.id},b),Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))}),d),r.componentProps=n["x-component-props"],r.data={v:(0,C.uid)()},a.emit("patch",{schema:{"x-uid":n["x-uid"],"x-component-props":n["x-component-props"]}}),[2]}})}),function(t){return e.apply(this,arguments)});var l=(t=B(function(){var e,t,r,a;return R(this,function(i){switch(i.label){case 0:if(!(r=null===(e=n["x-component-props"])||void 0===e?void 0:e.dashboardRecordId))return[2,{dashboardId:""}];return[4,o.resource("metabaseDashboard").get({filterByTk:r})];case 1:return[2,{dashboardId:(null==(a=i.sent().data)?void 0:null===(t=a.data)||void 0===t?void 0:t.dashboardId)||""}]}})}),function(){return t.apply(this,arguments)}),c=S();return{title:c("Edit Metabase Dashboard"),asyncGetInitialValues:l,schema:{type:"object",properties:{dashboardId:{title:c("Dashboard ID"),"x-decorator":"FormItem","x-component":"Input",required:!0}}},onSubmit:i,noRecord:!0}}},{name:"setTheBlockHeight",Component:f.SchemaSettingsBlockHeightItem},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]},T=new f.SchemaSettings(q({name:"blockSettings:metabaseDashboard"},F)),A=(0,y.createContext)(null),_=function(e){var t=e.children,r=(0,f.useRequest)({url:"metabaseDashboardConfiguration:get"});return m().createElement(A.Provider,{value:r},t)},N=s("563");function U(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(n,o)}var K={name:"metabaseDashboardConfiguration",filterTargetKey:"id",fields:[{type:"string",name:"baseUrl",interface:"input",uiSchema:{type:"string",title:"Base URL",required:!0,"x-component":"Input"}},{type:"string",name:"secretKey",interface:"input",uiSchema:{type:"string",title:"Secret Key",required:!0,"x-component":"Password"}}]},L=function(){var e=(0,f.useCollectionRecordData)();return{form:(0,y.useMemo)(function(){return(0,N.createForm)({initialValues:e})},[e])}},z=function(){var e=(0,h.useForm)(),t=v.App.useApp().message;(0,f.useCollection)();var r=(0,f.useDataBlockResource)(),n=m().useContext(A),o=S();return{type:"primary",htmlType:"submit",onClick:function(){var a;return(a=function(){var a;return function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(i){switch(i.label){case 0:return[4,e.submit()];case 1:var l,c;return i.sent(),console.log("values",a=e.values),[4,r.updateOrCreate({values:(l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({},a),c=null!=(c={id:1})?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(c)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(c)).forEach(function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(c,e))}),l),filterKeys:["id"]})];case 2:return i.sent(),[4,n.runAsync()];case 3:return i.sent(),t.success(o("Saved successfully")),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,n){var o=a.apply(e,t);function i(e){U(o,r,n,i,l,"next",e)}function l(e){U(o,r,n,i,l,"throw",e)}i(void 0)})})()}}},G=function(){var e,t=S();return m().createElement(f.ExtendCollectionsProvider,{collections:[K]},m().createElement(f.SchemaComponent,{schema:(e=t,{type:"void",name:(0,C.uid)(),"x-component":"CardItem","x-decorator":"DataBlockProvider","x-decorator-props":{collection:K.name,action:"get"},properties:{form:{type:"void","x-component":"FormV2","x-use-component-props":"useFormBlockProps",properties:{baseUrl:{title:e("Base URL"),"x-decorator":"FormItem","x-component":"CollectionField"},secretKey:{title:e("Secret Key"),"x-decorator":"FormItem","x-component":"CollectionField"},footer:{type:"void","x-component":"Action",title:e("Submit"),"x-use-component-props":"useSubmitActionProps"}}}}}),scope:{useFormBlockProps:L,useSubmitActionProps:z,t:t}}))},H=function(){var e=(0,f.useRequest)({url:"metabaseDashboardConfiguration:get"}),t=e.data;return e.loading?m().createElement("p",null,"Loading..."):m().createElement("pre",null,JSON.stringify(null==t?void 0:t.data,null,2))};function J(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(n,o)}function V(e,t,r){return(V=Y()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&W(o,r.prototype),o}).apply(null,arguments)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t="function"==typeof Map?new Map:void 0;return(X=function(e){var r;if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return V(e,arguments,Q(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),W(n,e)})(e)}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Y=function(){return!!e})()}var Z=function(e){var t,r,n;function o(){var e,t,r;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),e=this,t=o,r=arguments,t=Q(t),function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],Q(e).constructor):t.apply(e,r))}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(o,e),t=o,r=[{key:"load",value:function(){var e,t=this;return(e=function(){var e;return function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(r){return t.app.schemaSettingsManager.add(T),t.app.use(E),null==(e=t.app.schemaInitializerManager.get("page:addBlock"))||e.add("otherBlocks.metabaseDashboard",{title:(0,f.tval)("Metabase Dashboard",{ns:"@dgtech/plugin-metabase-dashboard"}),Component:"MetabaseDashboardBlockInitializer"}),t.app.pluginSettingsManager.add("metabase-dashboard",{title:(0,f.tval)("Metabase Dashboard Settings",{ns:"@dgtech/plugin-metabase-dashboard"}),icon:"FormOutlined",Component:G}),t.app.router.add("admin.metabase-dashboard-page",{path:"/admin/metabase-dashboard-page",Component:H}),t.app.addProvider(_),f.i18n.addResourceBundle("en","metabase-dashboard",d),f.i18n.addResourceBundle("zh","metabase-dashboard",b),[2]})},function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){J(a,n,o,i,l,"next",e)}function l(e){J(a,n,o,i,l,"throw",e)}i(void 0)})})()}}],$(t.prototype,r),o}(X(f.Plugin)),ee=Z;return p}()});